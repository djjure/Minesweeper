<!DOCTYPE html>
<html lang="en">
<head>
    <title>Loading Game...</title>
</head>
<body>

    <h1>Loading your saved Minesweeper game...</h1>

    <script>
        var encodedGameHtml = `%3C%21DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Ctitle%3EMinesweeper%3C%2Ftitle%3E%0A%20%20%20%20%3Cstyle%3E%0Abody%20%7B%0A%20%20%20%20font-family%3A%20sans-serif%3B%0A%20%20%20%20text-align%3A%20center%3B%0A%20%20%20%20%2F%2A%20Prevent%20text%20selection%20and%20default%20touch%20actions%20%2A%2F%0A%20%20%20%20user-select%3A%20none%3B%0A%20%20%20%20-webkit-user-select%3A%20none%3B%20%2F%2A%20For%20Safari%20%2A%2F%0A%20%20%20%20touch-action%3A%20manipulation%3B%0A%20%20%20%20-webkit-touch-action%3A%20manipulation%3B%20%2F%2A%20For%20Safari%20%2A%2F%0A%20%20%20%20-webkit-touch-callout%3A%20none%3B%20%2F%2A%20iOS%20Safari%20specific%3A%20prevents%20a%20long-press%20from%20showing%20a%20callout%20bubble%20on%20links%2Fimages%20%2A%2F%0A%7D%0A%0A%23board%20%7B%0A%20%20%20%20%2F%2A%20Revert%20to%20older%20layout%20method%20like%20float%20%2A%2F%0A%20%20%20%20%2F%2A%20Calculate%20width%3A%208%20cells%20%2A%2060px%20%2B%207%20gaps%20%2A%201px%20%2B%202%20%2A%201px%20board%20border%20%2A%2F%0A%20%20%20%20width%3A%20489px%3B%20%2F%2A%20%288%2A60%29%20%2B%20%287%2A1%29%20%2B%20%282%2A1%29%20%2A%2F%0A%20%20%20%20height%3A%20489px%3B%20%2F%2A%20Ensure%20height%20matches%20width%20for%20a%20square%20board%20with%20floats%20%2A%2F%0A%0A%20%20%20%20border%3A%201px%20solid%20black%3B%0A%20%20%20%20margin%3A%2020px%20auto%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2A%20Ensure%20border%20is%20included%20in%20width%2Fheight%20calculation%20%2A%2F%0A%20%20%20%20box-sizing%3A%20border-box%3B%0A%20%20%20%20-webkit-box-sizing%3A%20border-box%3B%20%2F%2A%20For%20Safari%20%2A%2F%0A%7D%0A%0A%2F%2A%20Clearfix%20for%20the%20floated%20cells%20within%20the%20board%20%2A%2F%0A%23board%3A%3Aafter%20%7B%0A%20%20%20%20content%3A%20%22%22%3B%0A%20%20%20%20display%3A%20block%3B%0A%20%20%20%20clear%3A%20both%3B%0A%7D%0A%0A.cell%20%7B%0A%20%20%20%20width%3A%2060px%3B%0A%20%20%20%20height%3A%2060px%3B%0A%20%20%20%20border%3A%201px%20solid%20gray%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2A%20Use%20float%20to%20arrange%20cells%20in%20a%20grid-like%20manner%20%2A%2F%0A%20%20%20%20float%3A%20left%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2A%20Create%201px%20gap%20using%20margins%20%2A%2F%0A%20%20%20%20margin-right%3A%201px%3B%0A%20%20%20%20margin-bottom%3A%201px%3B%0A%0A%20%20%20%20%2F%2A%20Ensure%20border%20and%20margin%20are%20included%20in%20width%2Fheight%20calculation%20%2A%2F%0A%20%20%20%20box-sizing%3A%20border-box%3B%0A%20%20%20%20-webkit-box-sizing%3A%20border-box%3B%20%2F%2A%20For%20Safari%20%2A%2F%0A%0A%20%20%20%20text-align%3A%20center%3B%0A%20%20%20%20%2F%2A%20Vertically%20center%20single-line%20text%20using%20line-height%20%2A%2F%0A%20%20%20%20line-height%3A%2060px%3B%20%2F%2A%20Make%20line-height%20equal%20to%20cell%20height%20%2A%2F%0A%20%20%20%20font-size%3A%2050px%3B%0A%20%20%20%20font-weight%3A%20bold%3B%20%2F%2A%20Added%20from%20the%20JS%20suggested%20CSS%20%2A%2F%0A%0A%20%20%20%20cursor%3A%20pointer%3B%0A%20%20%20%20%2F%2A%20Prevent%20text%20selection%20and%20default%20touch%20actions%20on%20cells%20%2A%2F%0A%20%20%20%20user-select%3A%20none%3B%0A%20%20%20%20-webkit-user-select%3A%20none%3B%20%2F%2A%20For%20Safari%20%2A%2F%0A%20%20%20%20touch-action%3A%20manipulation%3B%0A%20%20%20%20-webkit-touch-action%3A%20manipulation%3B%20%2F%2A%20For%20Safari%20%2A%2F%0A%7D%0A%0A%2F%2A%20Remove%20margin-right%20for%20cells%20in%20the%20last%20column%20%2A%2F%0A%23board%20.cell%3Anth-child%288n%29%20%7B%0A%20%20%20%20margin-right%3A%200%3B%0A%7D%0A%0A%2F%2A%20You%20might%20want%20to%20remove%20margin-bottom%20for%20cells%20in%20the%20last%20row%20as%20well%2C%0A%20%20%20but%20for%2010x10%20and%20fixed%20board%20height%2C%20it%27s%20often%20not%20strictly%20necessary%0A%20%20%20unless%20you%20want%20the%20board%20to%20dynamically%20shrink%20without%20the%20bottom%20margin.%0A%20%20%20If%20needed%2C%20this%20targets%20the%20last%2010%20cells%3A%0A%20%20%20%23board%20.cell%3Anth-last-child%28-n%20%2B%2010%29%20%7B%0A%20%20%20%20%20%20%20margin-bottom%3A%200%3B%0A%20%20%20%7D%0A%20%20%20Note%3A%20%3Anth-last-child%20might%20have%20limited%20support%20on%20very%20old%20Safari.%0A%2A%2F%0A%0A%0A.revealed%20%7B%0A%20%20%20%20background-color%3A%20lightgray%3B%0A%20%20%20%20cursor%3A%20default%3B%0A%7D%0A%0A.flagged%20%7B%0A%20%20%20%20background-color%3A%20yellow%3B%0A%20%20%20%20color%3A%20black%3B%0A%7D%0A%0A.mine%20%7B%0A%20%20%20%20background-color%3A%20red%3B%0A%7D%0A%0A.hit-mine%20%7B%0A%20%20%20%20background-color%3A%20darkred%3B%20%2F%2A%20Added%20from%20the%20JS%20suggested%20CSS%20%2A%2F%0A%20%20%20%20color%3A%20white%3B%20%2F%2A%20Added%20for%20hit%20mine%20text%20%2A%2F%0A%7D%0A%0A%2F%2A%20Number%20colors%20%28standard%20Minesweeper%29%20-%20these%20are%20generally%20well-supported%20%2A%2F%0A%2F%2A%20Number%20colors%20%28standard%20Minesweeper%29%20-%20NEW%20METHOD%20%2A%2F%0A.number-1%20%7B%20color%3A%20blue%3B%20%7D%0A.number-2%20%7B%20color%3A%20green%3B%20%7D%0A.number-3%20%7B%20color%3A%20red%3B%20%7D%0A.number-4%20%7B%20color%3A%20darkblue%3B%20%7D%0A.number-5%20%7B%20color%3A%20darkred%3B%20%7D%0A.number-6%20%7B%20color%3A%20teal%3B%20%7D%0A.number-7%20%7B%20color%3A%20black%3B%20%7D%20%2F%2A%20Often%20very%20dark%20gray%20or%20black%20%2A%2F%0A.number-8%20%7B%20color%3A%20gray%3B%20%7D%20%20%20%20%20%20%20%20%0A%20%20%20%20%3C%2Fstyle%3E%0A%3C%2Fhead%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3EMinesweeper%3C%2Fh1%3E%0A%20%20%20%20%3Ch3%20id%3D%22mineCount%22%3EMines%3A%20%3Cspan%20id%3D%22minesRemaining%22%3E%3C%2Fspan%3E%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%3Cspan%20id%3D%22gameOver%22%3E%3C%2Fspan%3E%3C%2Fh3%3E%0A%20%20%20%20%3Cdiv%20id%3D%22board%22%3E%3C%2Fdiv%3E%0A%20%20%20%20%3Cbutton%20id%3D%22restartButton%22%20style%3D%22padding%3A%2010px%2020px%3B%20font-size%3A%201.2em%3B%20margin-top%3A%2020px%3B%22%3ERestart%3C%2Fbutton%3E%0A%20%20%20%20%3Cbutton%20id%3D%22solveButton%22%20style%3D%22padding%3A%2010px%2020px%3B%20font-size%3A%201.2em%3B%20margin-top%3A%2020px%3B%22%3ESolve%3C%2Fbutton%3E%0A%20%20%20%20%3Cscript%20type%3D%22text%2Fjavascript%22%3E%0Aconst%20board%20%3D%20document.getElementById%28%27board%27%29%3B%0Aconst%20width%20%3D%208%3B%0Avar%20mineLocations%20%3D%20%5B%5D%3B%0Avar%20flags%20%3D%200%3B%0Avar%20gameover%20%3D%20false%3B%0Avar%20minesRemainingDisplay%20%3D%20document.getElementById%28%27minesRemaining%27%29%3B%0A%0A%0A%2F%2F%20Touch%20event%20variables%20for%20flagging%20%28long%20press%29%0Avar%20longPressTimer%3B%0Avar%20touchStartX%20%3D%200%3B%0Avar%20touchStartY%20%3D%200%3B%0Avar%20longPressThreshold%20%3D%20500%3B%20%2F%2F%20milliseconds%20for%20a%20long%20press%0Avar%20moveThreshold%20%3D%2010%3B%20%2F%2F%20pixels%20of%20movement%20to%20cancel%20long%20press%0Avar%20actualMineCount%20%3D%2010%3B%0A%0A%2F%2F%20Solver%20variables%0Avar%20solverIntervalId%20%3D%20null%3B%20%2F%2F%20To%20store%20the%20ID%20of%20the%20setInterval%0Avar%20solverProgressMade%20%3D%20false%3B%20%2F%2F%20Flag%20to%20track%20if%20the%20solver%20made%20progress%20in%20a%20pass%0Avar%20solverIntervalTime%20%3D%200%3B%0A%0A%0A%2F%2F%20Create%20Board%0Afunction%20createBoard%28%29%20%7B%0A%20%20%20%20board.innerHTML%20%3D%20%27%27%3B%20%2F%2F%20Clear%20existing%20cells%20if%20called%20multiple%20times%20%28e.g.%2C%20for%20reset%29%0A%20%20%20%20mineLocations%20%3D%20%5B%5D%3B%0A%20%20%20%20minesRemainingDisplay.innerText%20%3D%20actualMineCount%3B%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20width%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20mineLocations%5Bi%5D%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20j%20%3D%200%3B%20j%20%3C%20width%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mineLocations%5Bi%5D%5Bj%5D%20%3D%20false%3B%20%2F%2F%20Initialize%20all%20cells%20as%20non-mine%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Generate%20random%20mine%20locations%0A%20%20%20%20var%20mineCount%20%3D%20actualMineCount%3B%0A%20%20%20%20while%20%28mineCount%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20var%20x%20%3D%20Math.floor%28Math.random%28%29%20%2A%20width%29%3B%0A%20%20%20%20%20%20%20%20var%20y%20%3D%20Math.floor%28Math.random%28%29%20%2A%20width%29%3B%0A%20%20%20%20%20%20%20%20if%20%28%21mineLocations%5Bx%5D%5By%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mineLocations%5Bx%5D%5By%5D%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20mineCount--%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20mineLocations%5B5%5D%5B1%5D%20%3D%20true%3B%0A%20%20%20%20%2F%2F%20mineLocations%5B5%5D%5B4%5D%20%3D%20true%3B%0A%20%20%20%20%2F%2F%20mineLocations%5B5%5D%5B5%5D%20%3D%20true%3B%0A%20%20%20%20%2F%2F%20mineLocations%5B5%5D%5B8%5D%20%3D%20true%3B%0A%20%20%20%20%2F%2F%20mineLocations%5B4%5D%5B8%5D%20%3D%20true%3B%0A%20%20%20%20%2F%2F%20mineLocations%5B2%5D%5B7%5D%20%3D%20true%3B%0A%20%20%20%20%2F%2F%20mineLocations%5B2%5D%5B9%5D%20%3D%20true%3B%0A%20%20%20%20%2F%2F%20mineLocations%5B0%5D%5B8%5D%20%3D%20true%3B%0A%20%20%20%20%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20width%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20j%20%3D%200%3B%20j%20%3C%20width%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20cell%20%3D%20document.createElement%28%27div%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.classList.add%28%27cell%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setAttribute%28%27data-x%27%2C%20i%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.setAttribute%28%27data-y%27%2C%20j%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20board.appendChild%28cell%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20---%20Touch%20Event%20Handlers%20---%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.addEventListener%28%27touchstart%27%2C%20function%28e%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28gameover%29%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e.preventDefault%28%29%3B%20%2F%2F%20Prevent%20default%20browser%20actions%20%28zoom%2C%20scroll%2C%20context%20menu%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20touchStartX%20%3D%20e.touches%5B0%5D.clientX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20touchStartY%20%3D%20e.touches%5B0%5D.clientY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20currentCell%20%3D%20this%3B%20%2F%2F%20Capture%20%27this%27%20%28the%20cell%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20longPressTimer%20%3D%20setTimeout%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20flagCell%28currentCell%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20longPressTimer%20%3D%20null%3B%20%2F%2F%20Clear%20timer%20once%20executed%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20longPressThreshold%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.addEventListener%28%27touchend%27%2C%20function%28e%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28gameover%29%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28longPressTimer%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20the%20long%20press%20timer%20is%20still%20active%2C%20it%20means%20it%20was%20a%20short%20tap%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clearTimeout%28longPressTimer%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20longPressTimer%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20This%20is%20a%20short%20tap%20action%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this.classList.contains%28%27number-cell%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20chordClick%28parseInt%28this.getAttribute%28%27data-x%27%29%29%2C%20parseInt%28this.getAttribute%28%27data-y%27%29%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clickCell%28this%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20longPressTimer%20was%20null%2C%20it%20means%20longPressTimer%20executed%20%28flagged%29%20or%20was%20cleared%20by%20touchmove.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20In%20either%20case%2C%20no%20short%20tap%20action%20should%20occur.%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.addEventListener%28%27touchmove%27%2C%20function%28e%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28gameover%29%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20a%20long%20press%20timer%20is%20active%2C%20check%20for%20significant%20movement%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28longPressTimer%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20currentX%20%3D%20e.touches%5B0%5D.clientX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20currentY%20%3D%20e.touches%5B0%5D.clientY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20distance%20%3D%20Math.sqrt%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Math.pow%28currentX%20-%20touchStartX%2C%202%29%20%2B%20Math.pow%28currentY%20-%20touchStartY%2C%202%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28distance%20%3E%20moveThreshold%29%20%7B%20%2F%2F%20Moved%20more%20than%20threshold%20pixels%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clearTimeout%28longPressTimer%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20longPressTimer%20%3D%20null%3B%20%2F%2F%20Cancel%20the%20long%20press%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20---%20Mouse%20Event%20Handlers%20%28for%20desktop%2FFirefox%20compatibility%29%20---%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.addEventListener%28%27click%27%2C%20function%28e%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28gameover%29%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20a%20touch%20event%20just%20handled%20this%2C%20don%27t%20re-process%20for%20click%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%28This%20is%20a%20simplified%20check%2C%20a%20more%20robust%20one%20might%20use%20a%20flag%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28e.detail%20%3D%3D%3D%200%29%20return%3B%20%2F%2F%20%27e.detail%27%20is%200%20for%20synthetic%20clicks%2C%20non-zero%20for%20real%20clicks%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this.classList.contains%28%27number-cell%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20chordClick%28parseInt%28this.getAttribute%28%27data-x%27%29%29%2C%20parseInt%28this.getAttribute%28%27data-y%27%29%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clickCell%28this%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.addEventListener%28%27contextmenu%27%2C%20function%28e%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e.preventDefault%28%29%3B%20%2F%2F%20Prevent%20browser%27s%20context%20menu%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28gameover%29%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20flagCell%28this%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20---%20End%20Event%20Handlers%20---%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Flag%20Cell%0Afunction%20flagCell%28cell%29%20%7B%0A%20%20%20%20if%20%28gameover%29%20return%3B%0A%20%20%20%20if%20%28cell.classList.contains%28%27revealed%27%29%29%20return%3B%0A%0A%20%20%20%20if%20%28cell.innerText%20%3D%3D%3D%20%27%2A%27%29%20%7B%0A%20%20%20%20%20%20%20%20cell.innerText%20%3D%20%27%27%3B%0A%20%20%20%20%20%20%20%20cell.classList.remove%28%27flagged%27%29%3B%0A%20%20%20%20%20%20%20%20flags--%3B%0A%20%20%20%20%20%20%20%20minesRemainingDisplay.innerText%20%3D%20actualMineCount%20-%20flags%3B%0A%20%20%20%20%7D%20else%20if%20%28flags%20%3C%20actualMineCount%29%20%7B%0A%20%20%20%20%20%20%20%20cell.innerText%20%3D%20%27%2A%27%3B%0A%20%20%20%20%20%20%20%20cell.classList.add%28%27flagged%27%29%3B%0A%20%20%20%20%20%20%20%20flags%2B%2B%3B%0A%20%20%20%20%20%20%20%20minesRemainingDisplay.innerText%20%3D%20actualMineCount%20-%20flags%3B%0A%20%20%20%20%7D%0A%20%20%20%20checkWin%28%29%3B%0A%7D%0A%0A%0A%2F%2F%20Click%20on%20Cell%0Afunction%20clickCell%28cell%29%20%7B%0A%20%20%20%20if%20%28gameover%29%20return%3B%0A%20%20%20%20if%20%28cell.classList.contains%28%27revealed%27%29%20%7C%7C%20cell.innerText%20%3D%3D%3D%20%27%2A%27%29%20return%3B%20%2F%2F%20Already%20revealed%20or%20flagged%0A%0A%20%20%20%20var%20x%20%3D%20parseInt%28cell.getAttribute%28%27data-x%27%29%29%3B%0A%20%20%20%20var%20y%20%3D%20parseInt%28cell.getAttribute%28%27data-y%27%29%29%3B%0A%0A%20%20%20%20if%20%28mineLocations%5Bx%5D%5By%5D%29%20%7B%0A%20%20%20%20%20%20%20%20gameOver%28cell%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20var%20count%20%3D%20countAdjacentMines%28x%2C%20y%29%3B%0A%20%20%20%20%20%20%20%20cell.classList.add%28%27revealed%27%29%3B%0A%20%20%20%20%20%20%20%20if%20%28count%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.innerText%20%3D%20count%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20a%20class%20specifically%20for%20the%20number%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.classList.add%28%27number-cell%27%29%3B%20%2F%2F%20Keep%20this%20for%20general%20number%20styling%20if%20needed%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.classList.add%28%27number-%27%20%2B%20count%29%3B%20%2F%2F%20%3C--%20THIS%20IS%20THE%20KEY%20CHANGE%0A%20%20%20%20%20%20%20%20%20%20%20%20checkWin%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20revealAdjacentCells%28x%2C%20y%29%3B%20%2F%2F%20Only%20reveal%20adjacent%20if%20count%20is%200%0A%20%20%20%20%20%20%20%20%20%20%20%20checkWin%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Count%20Adjacent%20Mines%0Afunction%20countAdjacentMines%28x%2C%20y%29%20%7B%0A%20%20%20%20var%20count%20%3D%200%3B%0A%20%20%20%20for%20%28var%20i%20%3D%20-1%3B%20i%20%3C%3D%201%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20j%20%3D%20-1%3B%20j%20%3C%3D%201%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28i%20%3D%3D%3D%200%20%26%26%20j%20%3D%3D%3D%200%29%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20newX%20%3D%20x%20%2B%20i%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20newY%20%3D%20y%20%2B%20j%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28newX%20%3E%3D%200%20%26%26%20newX%20%3C%20width%20%26%26%20newY%20%3E%3D%200%20%26%26%20newY%20%3C%20width%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28mineLocations%5BnewX%5D%5BnewY%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20count%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20count%3B%0A%7D%0A%0A%2F%2F%20Reveal%20Adjacent%20Cells%20%28Flood%20Fill%20from%200-count%20cell%29%0Afunction%20revealAdjacentCells%28x%2C%20y%29%20%7B%0A%20%20%20%20if%20%28gameover%29%20return%3B%20%2F%2F%20Important%20to%20stop%20recursion%20if%20game%20ends%0A%0A%20%20%20%20for%20%28var%20i%20%3D%20-1%3B%20i%20%3C%3D%201%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20j%20%3D%20-1%3B%20j%20%3C%3D%201%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20This%20is%20crucial%3A%20don%27t%20click%20the%20original%20cell%20again.%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28i%20%3D%3D%3D%200%20%26%26%20j%20%3D%3D%3D%200%29%20continue%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20newX%20%3D%20x%20%2B%20i%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20newY%20%3D%20y%20%2B%20j%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28newX%20%3E%3D%200%20%26%26%20newX%20%3C%20width%20%26%26%20newY%20%3E%3D%200%20%26%26%20newY%20%3C%20width%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20adjacentCell%20%3D%20document.querySelector%28%27%5Bdata-x%3D%22%27%2BnewX%2B%27%22%5D%5Bdata-y%3D%22%27%2BnewY%2B%27%22%5D%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28adjacentCell%20%26%26%20%21adjacentCell.classList.contains%28%27revealed%27%29%20%26%26%20adjacentCell.innerText%20%21%3D%3D%20%27%2A%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clickCell%28adjacentCell%29%3B%20%2F%2F%20Recursively%20click%20unrevealed%2C%20unflagged%20neighbors%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Chord%20Click%20%28clicking%20a%20revealed%20number%20cell%29%0Afunction%20chordClick%28x%2C%20y%29%20%7B%0A%20%20%20%20if%20%28gameover%29%20return%3B%0A%0A%20%20%20%20var%20clickedCell%20%3D%20document.querySelector%28%27%5Bdata-x%3D%22%27%2Bx%2B%27%22%5D%5Bdata-y%3D%22%27%2By%2B%27%22%5D%27%29%3B%0A%20%20%20%20if%20%28%21clickedCell%20%7C%7C%20%21clickedCell.classList.contains%28%27number-cell%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20return%3B%20%2F%2F%20Should%20only%20be%20called%20on%20revealed%20number%20cells%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20expectedMineCount%20%3D%20parseInt%28clickedCell.innerText%29%3B%0A%20%20%20%20var%20actualFlagCount%20%3D%200%3B%0A%20%20%20%20var%20unrevealedNeighbors%20%3D%20%5B%5D%3B%20%2F%2F%20To%20store%20neighbors%20to%20reveal%2Fcheck%0A%0A%20%20%20%20for%20%28var%20i%20%3D%20-1%3B%20i%20%3C%3D%201%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20j%20%3D%20-1%3B%20j%20%3C%3D%201%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28i%20%3D%3D%3D%200%20%26%26%20j%20%3D%3D%3D%200%29%20continue%3B%20%2F%2F%20Don%27t%20check%20the%20cell%20itself%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20newX%20%3D%20x%20%2B%20i%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20newY%20%3D%20y%20%2B%20j%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28newX%20%3E%3D%200%20%26%26%20newX%20%3C%20width%20%26%26%20newY%20%3E%3D%200%20%26%26%20newY%20%3C%20width%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20neighborCell%20%3D%20document.querySelector%28%27%5Bdata-x%3D%22%27%2BnewX%2B%27%22%5D%5Bdata-y%3D%22%27%2BnewY%2B%27%22%5D%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28neighborCell%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28neighborCell.innerText%20%3D%3D%3D%20%27%2A%27%29%20%7B%20%2F%2F%20Check%20if%20flagged%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20actualFlagCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21neighborCell.classList.contains%28%27revealed%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20unrevealedNeighbors.push%28neighborCell%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28actualFlagCount%20%3D%3D%3D%20expectedMineCount%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20If%20the%20number%20of%20flags%20matches%20the%20number%20on%20the%20cell%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20attempt%20to%20reveal%20all%20unrevealed%2C%20unflagged%20neighbors.%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20can%20lead%20to%20game%20over%20if%20you%20mis-flagged.%0A%20%20%20%20%20%20%20%20%2F%2F%20Replaced%20forEach%20with%20a%20standard%20for%20loop%0A%20%20%20%20%20%20%20%20for%20%28var%20k%20%3D%200%3B%20k%20%3C%20unrevealedNeighbors.length%3B%20k%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20neighborCell%20%3D%20unrevealedNeighbors%5Bk%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28gameover%29%20return%3B%20%2F%2F%20Stop%20if%20game%20ends%20during%20the%20chord%20click%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28neighborCell.innerText%20%21%3D%3D%20%27%2A%27%29%20%7B%20%2F%2F%20If%20not%20flagged%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20nx%20%3D%20parseInt%28neighborCell.getAttribute%28%27data-x%27%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20ny%20%3D%20parseInt%28neighborCell.getAttribute%28%27data-y%27%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28mineLocations%5Bnx%5D%5Bny%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20you%20reveal%20an%20unflagged%20mine%20during%20a%20chord%20click%2C%20it%27s%20game%20over%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gameOver%28neighborCell%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clickCell%28neighborCell%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20If%20flag%20counts%20don%27t%20match%2C%20do%20nothing%20%28standard%20Minesweeper%20behavior%29.%0A%7D%0A%0A%0A%2F%2F%20Game%20Over%0Afunction%20gameOver%28hitCell%29%20%7B%0A%20%20%20%20gameover%20%3D%20true%3B%0A%20%20%20%20var%20cells%20%3D%20document.querySelectorAll%28%27.cell%27%29%3B%0A%20%20%20%20%2F%2F%20Replaced%20forEach%20with%20a%20standard%20for%20loop%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20cells.length%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20cells%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20x%20%3D%20parseInt%28c.getAttribute%28%27data-x%27%29%29%3B%0A%20%20%20%20%20%20%20%20var%20y%20%3D%20parseInt%28c.getAttribute%28%27data-y%27%29%29%3B%0A%20%20%20%20%20%20%20%20if%20%28mineLocations%5Bx%5D%5By%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20c.classList.add%28%27mine%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20c.innerText%20%3D%20%22%2A%22%3B%20%2F%2F%20Show%20all%20mines%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20c.style.pointerEvents%20%3D%20%27none%27%3B%20%2F%2F%20Disable%20further%20clicks%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28hitCell%29%20%7B%0A%20%20%20%20%20%20%20%20hitCell.classList.add%28%27hit-mine%27%29%3B%20%2F%2F%20Highlight%20the%20mine%20that%20was%20hit%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20cell%20%3D%20document.getElementById%28%27gameOver%27%29%3B%0A%20%20%20%20if%20%28cell%29%20%7B%0A%20%20%20%20%20%20%20%20cell.innerText%20%3D%20%27Game%20Over%21%27%3B%20%2F%2F%20Update%20the%20header%20to%20indicate%20game%20over%0A%20%20%20%20%7D%0A%0A%7D%0A%0A%2F%2F%20Check%20for%20Win%0Afunction%20checkWin%28%29%20%7B%0A%20%20%20%20var%20cells%20%3D%20document.querySelectorAll%28%27.cell%27%29%3B%0A%20%20%20%20var%20revealedCount%20%3D%200%3B%0A%20%20%20%20var%20nonMineCount%20%3D%200%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20width%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20j%20%3D%200%3B%20j%20%3C%20width%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21mineLocations%5Bi%5D%5Bj%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20nonMineCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Replaced%20forEach%20with%20a%20standard%20for%20loop%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20cells.length%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20var%20cell%20%3D%20cells%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20%28cell.classList.contains%28%27revealed%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20revealedCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28revealedCount%20%3D%3D%3D%20nonMineCount%29%20%7B%0A%20%20%20%20%20%20%20%20gameover%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20Replaced%20forEach%20with%20a%20standard%20for%20loop%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20cells.length%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20c%20%3D%20cells%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20c.style.pointerEvents%20%3D%20%27none%27%3B%20%2F%2F%20Disable%20further%20clicks%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Show%20all%20mines%20that%20were%20not%20flagged%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20width%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20j%20%3D%200%3B%20j%20%3C%20width%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20cell%20%3D%20document.querySelector%28%27%5Bdata-x%3D%22%27%2Bi%2B%27%22%5D%5Bdata-y%3D%22%27%2Bj%2B%27%22%5D%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28mineLocations%5Bi%5D%5Bj%5D%20%26%26%20%21cell.classList.contains%28%27flagged%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cell.innerText%20%3D%20%27%2A%27%3B%20%2F%2F%20Show%20all%20mines%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20minesRemainingDisplay.innerText%20%3D%200%3B%0A%0A%20%20%20%20%20%20%20%20var%20cell%20%3D%20document.getElementById%28%27gameOver%27%29%3B%0A%20%20%20%20%20%20%20%20if%20%28cell%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cell.innerText%20%3D%20%27You%20Win%21%27%3B%20%2F%2F%20Update%20the%20header%20to%20indicate%20win%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20New%20helper%20function%20to%20get%20neighbors%20and%20their%20types%20%28visible%20state%20only%29%0A%2F%2F%20This%20function%20is%20crucial%20for%20the%20%22no-cheating%22%20aspect%2C%20as%20it%20only%20reads%20cell%20attributes%2Fclasses%2FinnerText%0Afunction%20getNeighborInfo%28x%2C%20y%29%20%7B%0A%20%20%20%20var%20neighbors%20%3D%20%7B%0A%20%20%20%20%20%20%20%20total%3A%200%2C%0A%20%20%20%20%20%20%20%20revealed%3A%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20flagged%3A%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20hidden%3A%20%5B%5D%2C%20%2F%2F%20Unrevealed%20AND%20unflagged%0A%20%20%20%20%20%20%20%20allUnknown%3A%20%5B%5D%20%2F%2F%20All%20unrevealed%2C%20including%20flagged%20ones%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%20-1%3B%20i%20%3C%3D%201%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20j%20%3D%20-1%3B%20j%20%3C%3D%201%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28i%20%3D%3D%3D%200%20%26%26%20j%20%3D%3D%3D%200%29%20continue%3B%20%2F%2F%20Skip%20the%20cell%20itself%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20newX%20%3D%20x%20%2B%20i%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20newY%20%3D%20y%20%2B%20j%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28newX%20%3E%3D%200%20%26%26%20newX%20%3C%20width%20%26%26%20newY%20%3E%3D%200%20%26%26%20newY%20%3C%20width%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20neighbors.total%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20neighborCell%20%3D%20document.querySelector%28%27%5Bdata-x%3D%22%27%2BnewX%2B%27%22%5D%5Bdata-y%3D%22%27%2BnewY%2B%27%22%5D%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28neighborCell%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28neighborCell.classList.contains%28%27revealed%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20neighbors.revealed.push%28neighborCell%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%20%2F%2F%20Not%20revealed%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20neighbors.allUnknown.push%28neighborCell%29%3B%20%2F%2F%20Add%20to%20all%20unknown%2C%20regardless%20of%20flag%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28neighborCell.innerText%20%3D%3D%3D%20%27%2A%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20neighbors.flagged.push%28neighborCell%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20neighbors.hidden.push%28neighborCell%29%3B%20%2F%2F%20Only%20truly%20unrevealed%20and%20unflagged%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20neighbors%3B%0A%7D%0A%0A%2F%2F%20Helper%20to%20check%20if%20setB%20is%20a%20subset%20of%20setA%20%28based%20on%20cell%20element%20references%29%0Afunction%20isSubset%28setA%2C%20setB%29%20%7B%0A%20%20%20%20if%20%28setB.length%20%3D%3D%3D%200%29%20return%20true%3B%20%2F%2F%20An%20empty%20set%20is%20always%20a%20subset%0A%20%20%20%20if%20%28setA.length%20%3C%20setB.length%29%20return%20false%3B%20%2F%2F%20A%20larger%20set%20cannot%20be%20a%20subset%20of%20a%20smaller%20one%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20setB.length%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20var%20found%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20j%20%3D%200%3B%20j%20%3C%20setA.length%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28setB%5Bi%5D%20%3D%3D%3D%20setA%5Bj%5D%29%20%7B%20%2F%2F%20Check%20if%20elements%20are%20the%20same%20reference%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20found%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28%21found%29%20return%20false%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20true%3B%0A%7D%0A%0A%2F%2F%20Helper%20to%20get%20the%20difference%20set%20%28elements%20in%20setA%20but%20not%20in%20setB%29%0Afunction%20getDifference%28setA%2C%20setB%29%20%7B%0A%20%20%20%20var%20diff%20%3D%20%5B%5D%3B%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20setA.length%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20var%20elementA%20%3D%20setA%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20foundInB%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20j%20%3D%200%3B%20j%20%3C%20setB.length%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28elementA%20%3D%3D%3D%20setB%5Bj%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20foundInB%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28%21foundInB%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20diff.push%28elementA%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20diff%3B%0A%7D%0A%0A%2F%2F%20---%20Solver%20Functions%20---%0A%2F%2F%20Performs%20one%20step%20of%20the%20solving%20process%20based%20ONLY%20on%20visible%20board%20state%0Afunction%20solveStep%28%29%20%7B%0A%20%20%20%20if%20%28gameover%29%20%7B%0A%20%20%20%20%20%20%20%20stopSolver%28%29%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Flag%20to%20track%20if%20any%20progress%20was%20made%20in%20this%20iteration%20%28deduction%20or%20guess%29%0A%20%20%20%20solverProgressMade%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2F%20PHASE%201%3A%20Apply%20Basic%20Deduction%20Rules%20%28Rule%201%20%26%20Rule%202%29%0A%20%20%20%20%2F%2F%20These%20rules%20look%20at%20a%20single%20revealed%20number%20cell%20to%20deduce%20safe%20spots%20or%20mines.%0A%20%20%20%20var%20cells%20%3D%20document.querySelectorAll%28%27.cell%27%29%3B%20%2F%2F%20Get%20all%20cells%20once%20for%20efficiency%0A%20%20%20%20for%20%28var%20k%20%3D%200%3B%20k%20%3C%20cells.length%3B%20k%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20var%20cell%20%3D%20cells%5Bk%5D%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20Only%20process%20revealed%20number%20cells%0A%20%20%20%20%20%20%20%20if%20%28cell.classList.contains%28%27number-cell%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20x%20%3D%20parseInt%28cell.getAttribute%28%27data-x%27%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20y%20%3D%20parseInt%28cell.getAttribute%28%27data-y%27%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20cellNumber%20%3D%20parseInt%28cell.innerText%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20info%20%3D%20getNeighborInfo%28x%2C%20y%29%3B%20%2F%2F%20Get%20visible%20info%20about%20neighbors%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20RULE%202%3A%20Reveal%20Safe%20Cells%20%28Number%20of%20flags%20equals%20cell%20value%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20the%20number%20of%20flagged%20neighbors%20is%20exactly%20equal%20to%20the%20cell%27s%20number%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20then%20all%20other%20unrevealed%20%28unflagged%29%20neighbors%20MUST%20be%20safe.%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28info.flagged.length%20%3D%3D%3D%20cellNumber%20%26%26%20info.hidden.length%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20n%20%3D%200%3B%20n%20%3C%20info.hidden.length%3B%20n%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20safeCell%20%3D%20info.hidden%5Bn%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Ensure%20we%20don%27t%20click%20already%20revealed%20cells%20or%20flagged%20cells%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21safeCell.classList.contains%28%27revealed%27%29%20%26%26%20safeCell.innerText%20%21%3D%3D%20%27%2A%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clickCell%28safeCell%29%3B%20%2F%2F%20Click%20the%20safe%20cell%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20solverProgressMade%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%20%2F%2F%20Action%20taken%2C%20re-evaluate%20board%20on%20next%20interval%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20RULE%201%3A%20Flag%20Mines%20%28All%20unrevealed%2Funflagged%20neighbors%20must%20be%20mines%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20the%20total%20number%20of%20unknown%20cells%20%28flagged%20%2B%20unrevealed%2Funflagged%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20equals%20the%20cell%27s%20number%2C%20then%20all%20unrevealed%20%28unflagged%29%20neighbors%20MUST%20be%20mines.%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28info.flagged.length%20%2B%20info.hidden.length%20%3D%3D%3D%20cellNumber%20%26%26%20info.hidden.length%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20n%20%3D%200%3B%20n%20%3C%20info.hidden.length%3B%20n%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20mineCandidate%20%3D%20info.hidden%5Bn%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Ensure%20we%20don%27t%20flag%20already%20flagged%20cells%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28mineCandidate.innerText%20%21%3D%3D%20%27%2A%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20flagCell%28mineCandidate%29%3B%20%2F%2F%20Flag%20the%20mine%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20solverProgressMade%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%20%2F%2F%20Action%20taken%2C%20re-evaluate%20board%20on%20next%20interval%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%0A%20%20%20%20%2F%2F%20PHASE%202%3A%20Apply%20Advanced%20Subset%2FOverlap%20Patterns%20%28e.g.%2C%20A-B%20pattern%29%0A%20%20%20%20%2F%2F%20This%20phase%20looks%20at%20relationships%20between%20two%20adjacent%20revealed%20number%20cells.%0A%20%20%20%20%2F%2F%20It%27s%20more%20computationally%20intensive%2C%20so%20it%20runs%20after%20basic%20rules.%0A%20%20%20%20if%20%28%21solverProgressMade%29%20%7B%20%2F%2F%20Only%20proceed%20to%20advanced%20if%20basic%20rules%20didn%27t%20make%20progress%0A%20%20%20%20%20%20%20%20for%20%28var%20k%20%3D%200%3B%20k%20%3C%20cells.length%3B%20k%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20cellA%20%3D%20cells%5Bk%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cellA.classList.contains%28%27number-cell%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20xA%20%3D%20parseInt%28cellA.getAttribute%28%27data-x%27%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20yA%20%3D%20parseInt%28cellA.getAttribute%28%27data-y%27%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20numA%20%3D%20parseInt%28cellA.innerText%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20infoA%20%3D%20getNeighborInfo%28xA%2C%20yA%29%3B%20%2F%2F%20Neighbors%20of%20cellA%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Iterate%20through%20neighbors%20of%20cellA%20to%20find%20another%20revealed%20number%20cell%20%28cellB%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Ffor%20%28var%20i%20%3D%20-1%3B%20i%20%3C%3D%201%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%20-2%3B%20i%20%3C%3D%202%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Ffor%20%28var%20j%20%3D%20-1%3B%20j%20%3C%3D%201%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20j%20%3D%20-2%3B%20j%20%3C%3D%202%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28i%20%3D%3D%3D%200%20%26%26%20j%20%3D%3D%3D%200%29%20continue%3B%20%2F%2F%20Skip%20self%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20xB%20%3D%20xA%20%2B%20i%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20yB%20%3D%20yA%20%2B%20j%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28xB%20%3E%3D%200%20%26%26%20xB%20%3C%20width%20%26%26%20yB%20%3E%3D%200%20%26%26%20yB%20%3C%20width%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20cellB%20%3D%20document.querySelector%28%27%5Bdata-x%3D%22%27%2BxB%2B%27%22%5D%5Bdata-y%3D%22%27%2ByB%2B%27%22%5D%27%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Only%20consider%20pairs%20of%20adjacent%20revealed%20number%20cells%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cellB%20%26%26%20cellB.classList.contains%28%27number-cell%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20numB%20%3D%20parseInt%28cellB.innerText%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20infoB%20%3D%20getNeighborInfo%28xB%2C%20yB%29%3B%20%2F%2F%20Neighbors%20of%20cellB%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Calculate%20the%20%22remaining%20mines%22%20for%20each%20cell%20after%20accounting%20for%20flags%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20minesA_needed%20%3D%20numA%20-%20infoA.flagged.length%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20minesB_needed%20%3D%20numB%20-%20infoB.flagged.length%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20---%20Subset%20Rule%20for%20Flagging%20Mines%20%28A-B%20%3D%20M%20mines%29%20---%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20infoB.hidden%20%28B%27s%20unrevealed%2Funflagged%20neighbors%29%20is%20a%20subset%20of%20infoA.hidden%20%28A%27s%20unrevealed%2Funflagged%20neighbors%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20AND%20the%20difference%20in%20needed%20mines%20%28minesA_needed%20-%20minesB_needed%29%20equals%20the%20number%20of%20cells%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20unique%20to%20A%27s%20hidden%20neighbors%20%28infoA.hidden%20-%20infoB.hidden%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20THEN%20those%20unique%20cells%20MUST%20be%20mines.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fif%20%28isSubset%28infoA.hidden%2C%20infoB.hidden%29%20%26%26%20infoB.hidden.length%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28infoB.hidden.length%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20Ua_minus_Ub%20%3D%20getDifference%28infoA.hidden%2C%20infoB.hidden%29%3B%20%2F%2F%20Cells%20in%20infoA.hidden%20but%20not%20infoB.hidden%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28Ua_minus_Ub.length%20%3E%200%29%20%7B%20%2F%2F%20There%20are%20unique%20cells%20in%20A%27s%20hidden%20set%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28minesA_needed%20-%20minesB_needed%20%3D%3D%3D%20Ua_minus_Ub.length%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20The%20unique%20cells%20in%20Ua_minus_Ub%20must%20be%20mines%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20n%20%3D%200%3B%20n%20%3C%20Ua_minus_Ub.length%3B%20n%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20mineCandidate%20%3D%20Ua_minus_Ub%5Bn%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28mineCandidate.innerText%20%21%3D%3D%20%27%2A%27%29%20%7B%20%2F%2F%20Avoid%20re-flagging%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20flagCell%28mineCandidate%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20solverProgressMade%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%20%2F%2F%20Action%20taken%2C%20re-evaluate%20board%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20---%20Subset%20Rule%20for%20Revealing%20Safe%20Cells%20%28A-B%20%3D%200%20mines%29%20---%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20infoA.hidden%20%28A%27s%20unrevealed%2Funflagged%20neighbors%29%20is%20a%20subset%20of%20infoB.hidden%20%28B%27s%20unrevealed%2Funflagged%20neighbors%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20AND%20the%20difference%20in%20needed%20mines%20%28minesB_needed%20-%20minesA_needed%29%20is%20ZERO%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20THEN%20the%20cells%20unique%20to%20B%27s%20hidden%20neighbors%20%28infoB.hidden%20-%20infoA.hidden%29%20MUST%20be%20safe.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28isSubset%28infoB.hidden%2C%20infoA.hidden%29%20%26%26%20infoA.hidden.length%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20Ub_minus_Ua%20%3D%20getDifference%28infoB.hidden%2C%20infoA.hidden%29%3B%20%2F%2F%20Cells%20in%20infoB.hidden%20but%20not%20infoA.hidden%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28Ub_minus_Ua.length%20%3E%200%29%20%7B%20%2F%2F%20There%20are%20unique%20cells%20in%20B%27s%20hidden%20set%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28minesB_needed%20-%20minesA_needed%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20The%20unique%20cells%20in%20Ub_minus_Ua%20must%20be%20safe%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20n%20%3D%200%3B%20n%20%3C%20Ub_minus_Ua.length%3B%20n%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20safeCell%20%3D%20Ub_minus_Ua%5Bn%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21safeCell.classList.contains%28%27revealed%27%29%20%26%26%20safeCell.innerText%20%21%3D%3D%20%27%2A%27%29%20%7B%20%2F%2F%20Avoid%20re-clicking%2Fflagged%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clickCell%28safeCell%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20solverProgressMade%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%20%2F%2F%20Action%20taken%2C%20re-evaluate%20board%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%0A%20%20%20%20%2F%2F%20PHASE%203%3A%20Guess%20if%20no%20logical%20deductions%20were%20made%20in%20Phase%201%20or%202%0A%20%20%20%20if%20%28false%20%26%26%20%21solverProgressMade%29%20%7B%0A%20%20%20%20%20%20%20%20var%20unrevealedCells%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20width%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20j%20%3D%200%3B%20j%20%3C%20width%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20cell%20%3D%20document.querySelector%28%27%5Bdata-x%3D%22%27%2Bi%2B%27%22%5D%5Bdata-y%3D%22%27%2Bj%2B%27%22%5D%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Only%20consider%20truly%20unrevealed%20and%20unflagged%20cells%20for%20guessing%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cell%20%26%26%20%21cell.classList.contains%28%27revealed%27%29%20%26%26%20cell.innerText%20%21%3D%3D%20%27%2A%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20unrevealedCells.push%28cell%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28unrevealedCells.length%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Smart%20guessing%20heuristic%3A%20Try%20to%20click%20a%20cell%20that%20has%20the%20fewest%20%2Atotal%20unknown%2A%20neighbors.%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20This%20attempts%20to%20reduce%20the%20risk%20of%20hitting%20a%20mine%20by%20choosing%20cells%20with%20fewer%20%22potential%22%20mines%20around%20them.%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20bestGuessCell%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20minUnknownNeighbors%20%3D%20Infinity%3B%20%2F%2F%20Initialize%20with%20a%20very%20high%20number%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20unrevealedCells.length%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20guessCell%20%3D%20unrevealedCells%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20gx%20%3D%20parseInt%28guessCell.getAttribute%28%27data-x%27%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20gy%20%3D%20parseInt%28guessCell.getAttribute%28%27data-y%27%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20guessInfo%20%3D%20getNeighborInfo%28gx%2C%20gy%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20We%20want%20to%20minimize%20the%20number%20of%20%60allUnknown%60%20neighbors%20%28which%20includes%20flagged%20ones%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20because%20this%20is%20a%20rough%20proxy%20for%20how%20many%20potential%20mines%20are%20directly%20adjacent.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28guessInfo.allUnknown.length%20%3C%20minUnknownNeighbors%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20minUnknownNeighbors%20%3D%20guessInfo.allUnknown.length%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bestGuessCell%20%3D%20guessCell%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%28bestGuessCell%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clickCell%28bestGuessCell%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20solverProgressMade%20%3D%20true%3B%20%2F%2F%20A%20guess%2C%20even%20if%20it%20leads%20to%20game%20over%2C%20counts%20as%20progress%20for%20this%20step%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20No%20more%20unrevealed%2C%20unflagged%20cells.%20Game%20is%20likely%20won%20or%20stuck.%0A%20%20%20%20%20%20%20%20%20%20%20%20stopSolver%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20If%20after%20all%20phases%20%28basic%2C%20advanced%2C%20and%20guess%29%2C%20no%20progress%20was%20made%2C%20stop%20the%20solver.%0A%20%20%20%20%2F%2F%20This%20typically%20means%20the%20board%20is%20fully%20cleared%20or%20impossible%20to%20solve%20further%20logically.%0A%20%20%20%20if%20%28%21solverProgressMade%29%20%7B%0A%20%20%20%20%20%20%20%20stopSolver%28%29%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Start%20Game%0Afunction%20startGame%28%29%20%7B%0A%20%20%20%20%2F%2F%20Reset%20game%20state%20for%20a%20new%20game%0A%20%20%20%20gameover%20%3D%20false%3B%0A%20%20%20%20var%20cell%20%3D%20document.getElementById%28%27gameOver%27%29%3B%0A%20%20%20%20if%20%28cell%29%20%7B%0A%20%20%20%20%20%20%20%20cell.innerText%20%3D%20%27%27%20%2F%2F%20Update%20the%20header%20to%20indicate%20win%0A%20%20%20%20%7D%0A%0A%20%20%20%20flags%20%3D%200%3B%0A%20%20%20%20createBoard%28%29%3B%20%2F%2F%20Recreate%20board%20with%20new%20mine%20locations%0A%0A%20%20%20%20%2F%2F%20Ensure%20the%20first%20clicked%20cell%20is%20empty%20and%20has%20no%20adjacent%20mines%0A%20%20%20%20var%20x%2C%20y%2C%20count%3B%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20x%20%3D%20Math.floor%28Math.random%28%29%20%2A%20width%29%3B%0A%20%20%20%20%20%20%20%20y%20%3D%20Math.floor%28Math.random%28%29%20%2A%20width%29%3B%0A%20%20%20%20%20%20%20%20count%20%3D%20countAdjacentMines%28x%2C%20y%29%3B%0A%20%20%20%20%7D%20while%20%28mineLocations%5Bx%5D%5By%5D%20%7C%7C%20count%20%3E%200%29%3B%0A%0A%20%20%20%20var%20cell%20%3D%20document.querySelector%28%27%5Bdata-x%3D%22%27%2Bx%2B%27%22%5D%5Bdata-y%3D%22%27%2By%2B%27%22%5D%27%29%3B%0A%20%20%20%20%2F%2Fcell%20%3D%20document.querySelector%28%27%5Bdata-x%3D%22%27%2B0%2B%27%22%5D%5Bdata-y%3D%22%27%2B0%2B%27%22%5D%27%29%3B%0A%20%20%20%20clickCell%28cell%29%3B%0A%7D%0A%0A%0A%2F%2F%20Starts%20the%20solver%0Afunction%20startSolver%28%29%20%7B%0A%20%20%20%20if%20%28solverIntervalId%29%20return%3B%20%2F%2F%20Already%20running%0A%20%20%20%20solverIntervalId%20%3D%20setInterval%28solveStep%2C%20solverIntervalTime%29%3B%20%2F%2F%20Click%20every%201%20second%0A%20%20%20%20document.getElementById%28%27solveButton%27%29.innerText%20%3D%20%27Stop%20Solving%27%3B%0A%7D%0A%0A%2F%2F%20Stops%20the%20solver%0Afunction%20stopSolver%28%29%20%7B%0A%20%20%20%20if%20%28solverIntervalId%29%20%7B%0A%20%20%20%20%20%20%20%20clearInterval%28solverIntervalId%29%3B%0A%20%20%20%20%20%20%20%20solverIntervalId%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20document.getElementById%28%27solveButton%27%29.innerText%20%3D%20%27Solve%27%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Initial%20game%20setup%0AstartGame%28%29%3B%20%2F%2F%20Call%20startGame%20instead%20of%20createBoard%20directly%20to%20ensure%20initial%20empty%20click%0A%0A%2F%2F%20Event%20listener%20for%20the%20Solve%20button%0Adocument.addEventListener%28%27DOMContentLoaded%27%2C%20function%28%29%20%7B%0A%20%20%20%20var%20solveButton%20%3D%20document.getElementById%28%27solveButton%27%29%3B%0A%20%20%20%20if%20%28solveButton%29%20%7B%0A%20%20%20%20%20%20%20%20solveButton.addEventListener%28%27click%27%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28solverIntervalId%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20solver%20is%20running%2C%20stop%20it%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20stopSolver%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20game%20is%20over%20or%20solved%2C%20start%20a%20new%20game%20first%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20%28gameover%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20startGame%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Then%20start%20the%20solver%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20startSolver%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20restartButton%20%3D%20document.getElementById%28%27restartButton%27%29%3B%0A%20%20%20%20if%20%28restartButton%29%20%7B%0A%20%20%20%20%20%20%20%20restartButton.addEventListener%28%27click%27%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28solverIntervalId%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20solver%20is%20running%2C%20stop%20it%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20stopSolver%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20startGame%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%20%20%20%20%0A%7D%29%3B%0A%20%20%20%20%3C%2Fscript%3E%0A%3C%2Fbody%3E%0A%3C%2Fhtml%3E%0A`;


        var dataUrl = 'data:text/html;charset=utf-8,' + encodedGameHtml;

        window.location.href = dataUrl;
    </script>

</body>
</html>